import{a as z,R,r as a,j as s,s as x,Q as W,_ as l}from"./index-S50c8m2H.js";import{A as $}from"./AdvantagesSection-tw7nVc6P.js";import{D as E,L as T}from"./DocumentTitle-B-ljFPm7.js";import{c as q,a as h,b as A,u as I,o as L}from"./yup-QmCvZnig.js";const M="_container_kuz7m_1",C="_header_kuz7m_5",G="_label_kuz7m_12",B="_formGroupPassword_kuz7m_20",F="_input_kuz7m_26",D="_error_kuz7m_45",H="_errorMessage_kuz7m_49",U="_inputWrapper_kuz7m_58",V="_submitButton_kuz7m_62",O="_buttonWrapper_kuz7m_80",Q="_passwordToggleIcon_kuz7m_84",e={container:M,header:C,label:G,formGroupPassword:B,input:F,error:D,errorMessage:H,inputWrapper:U,submitButton:V,buttonWrapper:O,passwordToggleIcon:Q},J=()=>{const p=z(),o=R(),[t,_]=a.useState("");a.useEffect(()=>{const n=new URLSearchParams(o.search).get("token");_(n)},[o]);const b=q().shape({password:h().min(8,"Password must be at least 8 characters").required("Password is required"),repeatPassword:h().oneOf([A("password"),null],"Passwords must match").required("Repeat password is required")}),{register:u,handleSubmit:f,formState:{errors:r},reset:P}=I({resolver:L(b)}),j=async m=>{var n,w;try{(await W.post("https://project6-back.onrender.com/users/reset-password",{token:t,password:m.password})).status===200?(l.success("Password reset successful",{duration:4e3,position:"top-center",style:{textAlign:"center",boxShadow:"8px 11px 27px -8px rgba(66, 68, 90, 1)"}}),P(),p("/signin")):l.error("Something went wrong. Please try again.",{duration:4e3,position:"top-center",style:{textAlign:"center",boxShadow:"8px 11px 27px -8px rgba(66, 68, 90, 1)"}})}catch(d){const y=((w=(n=d.response)==null?void 0:n.data)==null?void 0:w.message)||d.message;l.error(`Error: ${y}`,{duration:4e3,position:"top-center",style:{textAlign:"center",boxShadow:"8px 11px 27px -8px rgba(66, 68, 90, 1)"}})}},[c,k]=a.useState(!1),[i,v]=a.useState(!1),N=()=>{k(!c)},S=()=>{v(!i)};return s.jsx("div",{className:e.container,children:s.jsxs("form",{onSubmit:f(j),autoComplete:"off",children:[s.jsx("h2",{className:e.header,children:"Change the password"}),s.jsxs("div",{className:e.formGroupPassword,children:[s.jsx("label",{className:e.label,children:"New password:"}),s.jsxs("div",{className:e.inputWrapper,children:[s.jsx("input",{className:`${e.input} ${r.password?e.error:""}`,type:c?"text":"password",name:"password",placeholder:"Enter your password",...u("password")}),s.jsx("svg",{className:e.passwordToggleIcon,onClick:N,width:"20px",height:"20px",children:s.jsx("use",{xlinkHref:`${x}#${c?"eye":"eye-off"}`})})]}),r.password&&s.jsx("p",{className:e.errorMessage,children:r.password.message})]}),s.jsxs("div",{className:e.formGroupPassword,children:[s.jsx("label",{className:e.label,children:"Repeat new password:"}),s.jsxs("div",{className:e.inputWrapper,children:[s.jsx("input",{className:`${e.input} ${r.repeatPassword?e.error:""}`,type:i?"text":"password",placeholder:"Repeat password",name:"repeatPassword",...u("repeatPassword")}),s.jsx("svg",{className:e.passwordToggleIcon,onClick:S,width:"20px",height:"20px",children:s.jsx("use",{xlinkHref:`${x}#${i?"eye":"eye-off"}`})})]}),r.repeatPassword&&s.jsx("p",{className:e.errorMessage,children:r.repeatPassword.message})]}),s.jsx("div",{className:e.buttonWrapper,children:s.jsx("button",{className:e.submitButton,type:"submit",children:"Change"})})]})})},K="_backdrop_1avkf_1",X="_wrapper_1avkf_10",g={backdrop:K,wrapper:X},rs=()=>{const[p,o]=a.useState(window.innerWidth>=1440);return a.useEffect(()=>{const t=()=>{o(window.innerWidth>=1440)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]),s.jsxs("div",{className:g.wrapper,children:[s.jsx(E,{children:"Aqua Track - Reset Password"}),s.jsxs("div",{className:g.backdrop,children:[s.jsx(T,{}),s.jsx(J,{})]}),p&&s.jsx($,{})]})};export{rs as default};
//# sourceMappingURL=ResetPasswordPage-BAJ1fhcp.js.map
